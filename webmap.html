<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no" />

    <title>Neighbourhood Explorer Map</title>

    <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/dark/main.css" />

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
      }
    </style>

    <script src="https://js.arcgis.com/4.29/"></script>

    <script>
      require(["esri/WebMap", "esri/views/MapView", "esri/widgets/LayerList"],
      (WebMap, MapView, LayerList) => {
        const map = new WebMap({
          portalItem: {
            id: "6361681bd24b41e09bbb993fbf0fad6f"
          }
        });

        // Add the map to a MapView
        const view = new MapView({
          container: "viewDiv",
          map: map
        });

        // Add a legend instance to the panel of a ListItem in a LayerList instance
        
        const layerList = new LayerList({
          view: view,
          listItemCreatedFunction: (event) => {
            const item = event.item;
            if (item.layer.type != "group") {
              // don't show legend twice
              item.panel = {
                content: "legend",
                open: true
              };
            }
          }
        });
        view.ui.add(layerList, "bottom-right");
      });
    </script>
  </head>

  <body>
    <div id="viewDiv"></div>

  </body>
</html>